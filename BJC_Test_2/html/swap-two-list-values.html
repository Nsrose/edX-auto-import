<!DOCTYPE html> <html> <script>
function bindEscKey() {
        // Escape key toggles snap iframe on and off (visible and hidden) with esc key.
        $('#snap-frame').contents().bind('keydown', function(e) {
            if (e.which == 27) {
                $('#snap-frame').fadeToggle();
            }
        });
    }
    if (!$('#snap-toggle').length) {
        // Adds a snap button at top left portion of screen to toggle snap window.
        $('body').prepend('<img type="button" id="snap-toggle" type="image" src="http://edge.edx.org/c4x/BerkeleyX/CS10/asset/alonso.png" width="32" height="35" style="-moz-border-radius: 10px; -webkit-border-radius: 40px; opacity: 0.5; position: fixed; top: 11px; left: 9px; z-index: 9999;">');

        // Causes snap iframe to fade in and out when the snap button is clicked.
        $('#snap-toggle').click(function () {
            $('#snap-frame').fadeToggle();
        });

        // Causes transparency of snap-toggle button.
        $("#snap-toggle").hover(function(){
            $("#snap-toggle").css("opacity","1");
        }, function() {
            $("#snap-toggle").css("opacity","0.5");
        });
    }

    if (!$('#snap-frame').length) {
        // Adds a nearly full screen snap iframe that can be toggled on and off.
        $('body').prepend('<iframe id="snap-frame" onload="bindEscKey()" class="zoom-in" style="width: 95.8%; height: 100%; position: fixed; right: 0; top: 0; z-index: 9999;" src="/static/index.html" sandbox="allow-same-origin allow-forms allow-scripts"></iframe>');
        $('#snap-frame').hide();
        $('#snap-frame').height($(window).height());
        $('#snap-frame').width($(window).width() * 0.958);

        // Escape key toggles snap iframe on and off (visible and hidden) with esc key.
        $(document).bind('keydown', function(e) {
            if (e.which == 27) {
                $('#snap-frame').fadeToggle();
            }
        });
    }
</script>
 <head> <!-- put the following in exactly --><script type="text/javascript" src="http://bjc.berkeley.edu/bjc-r/admin/bjc-loader.js"></script><title>Swap Two List Values</title><!--ORIGINAL NAME: Swap List Values--> </head> <body> <h1>Swap Two List Values</h1> We want to make a block that swaps two items in a list.  The block takes two numbers, representing positions of items in the list, and the list itself as its inputs; it swaps the positions of those items in the list. Make this block in the List category; it's a command block. Set the input types of <code> itemX</code> and <code> itemY</code> to number, and the type of <code> data</code> to list. <br> <br> <div style="margin-left: 40px;"> <img border="0" title="'swap items' block" alt="'swap items' block" src="http://bjc.berkeley.edu/bjc-r/img/list/swapproto.png" origsrc="http://veritas.eecs.berkeley.edu/courses/file.php/17/Images/Lab05/Lists/SwapRows/Empty.gif"> </div> <p> When you click <tt>Apply</tt>, you should be able to see the block with two round number input spots and one list input spot. </p> <div style="margin-left: 40px;"> <img border="0" title="'swap items' block with list input" alt="'swap items' block with list input" src="http://bjc.berkeley.edu/bjc-r/img/list/swap-rows-empty-block-list-input-BYOB.gif" origsrc="http://veritas.eecs.berkeley.edu/courses/file.php/17/Images/Lab05/Lists/SwapRows/ListInput.gif"> </div> <p> (By the way, we called the list input <code> data</code> instead of <code> list</code> because people have commented that it's too easy to confuse a <code> list</code> variable block with the block to create an empty list: <img src="http://bjc.berkeley.edu/bjc-r/img/list/orangelist.png" alt="orange list variable"><img src="http://bjc.berkeley.edu/bjc-r/img/list/redlist.png" alt="red list constructor"> .) <br> </p> <p> Finish entering the complete script: </p> <p><img src="http://bjc.berkeley.edu/bjc-r/img/list/swapitems.png" alt="complete swap items script"> </p> <p> Here is an example of how the block will be used:  If we run the block with the arguments <br> </p> <div style="margin-left: 40px;"> <img border="0" src="http://bjc.berkeley.edu/bjc-r/img/list/swapexample.png" alt="Swap items" title="Swap items" origsrc="http://veritas.eecs.berkeley.edu/courses/file.php/17/Images/Lab05/GameBoard/SwapRowsExample.gif"> </div> <p> where <tt>game board</tt> is the list </p> <div style="margin-left: 40px;"> <img border="0" src="http://bjc.berkeley.edu/bjc-r/img/list/gameboard.png" alt="Before" title="Before" origsrc="http://veritas.eecs.berkeley.edu/courses/file.php/17/Images/Lab05/GameBoard/ListBeforeSwap.gif"> </div> <p> then the list should become </p> <div style="margin-left: 40px;"> <p><img border="0" src="http://bjc.berkeley.edu/bjc-r/img/list/gameboard-after.png" alt="After" title="After" origsrc="http://veritas.eecs.berkeley.edu/courses/file.php/17/Images/Lab05/GameBoard/ListAfterSwap.gif"> </p> </div> <p> The <code> replace item</code> blocks in this script are an example of a new technique, list <em>mutation</em>--changing items in an existing list, instead of creating a new list the way <code> map</code> and <code> keep</code> do. As in this example, mutation can be more efficient than recopying the entire list except for the two changed items.  On the other hand, mutation introduces the possibility of new kinds of bugs that can't happen with <em>functional</em> programming, the technique we've been using with lists until now.  If two parts of a large program are using the same list for different purposes, and one part mutates the list, the other part will get confused.  That's why we showed you functional programming first, and why functional programming should be your first instinct. </p> <p> We <em>have</em> used mutation before with non-list data; for example, the <code> for</code> block changes the value of its variable <code> i</code> each time through the loop. Mutation isn't so dangerous in that context, because that variable exists only inside the <code> for</code> loop, there's no way another part of the program can be relying on an old value. Mutating <em>global</em> variables does have the same risk, though, which is why we've been saying that script variables are a better choice when possible. But a game board is an example of a value that's unavoidably both global and mutable.  We'll go into this further in the next lesson. </p> </body> </html>